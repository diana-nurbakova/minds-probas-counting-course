<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CDF Animation</title>
    <style>
        .my-animation-container body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background: #f8fafc;
        }
        .container {
            text-align: center;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        svg {
            max-width: 100%;
            height: auto;
        }
        .controls {
            margin-top: 20px;
        }
        button {
            padding: 10px 20px;
            margin: 0 5px;
            font-size: 14px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.3s;
        }
        .play-btn { background: #3b82f6; color: white; }
        .play-btn:hover { background: #2563eb; }
        .reset-btn { background: #6b7280; color: white; }
        .reset-btn:hover { background: #4b5563; }
        .next-btn { background: #8b5cf6; color: white; }
        .next-btn:hover { background: #7c3aed; }
        .hidden { display: none; }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        .highlight { animation: pulse 1s ease-in-out infinite; }
        .arrow-bounce { animation: bounce 1s ease-in-out infinite; }
    </style>
</head>
<body>
    <div class="my-animation-container">
    <div class="container">
        <svg id="cdfSvg" viewBox="0 0 800 350" xmlns="http://www.w3.org/2000/svg">
            <!-- Background -->
            <rect width="800" height="350" fill="#f8fafc"/>
            
            <!-- Title -->
            <text x="400" y="35" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="#1e293b">
                Cumulative Distribution Function (CDF) Calculation
            </text>
            
            <!-- Table border -->
            <rect x="50" y="70" width="700" height="180" fill="white" stroke="#cbd5e1" stroke-width="2" rx="8"/>
            
            <!-- Header row -->
            <line x1="50" y1="110" x2="750" y2="110" stroke="#94a3b8" stroke-width="2"/>
            
            <!-- Column lines -->
            <line x1="150" y1="70" x2="150" y2="250" stroke="#e2e8f0" stroke-width="1"/>
            <line x1="270" y1="70" x2="270" y2="250" stroke="#e2e8f0" stroke-width="1"/>
            <line x1="390" y1="70" x2="390" y2="250" stroke="#e2e8f0" stroke-width="1"/>
            <line x1="510" y1="70" x2="510" y2="250" stroke="#e2e8f0" stroke-width="1"/>
            <line x1="630" y1="70" x2="630" y2="250" stroke="#e2e8f0" stroke-width="1"/>
            
            <!-- Row separator -->
            <line x1="50" y1="160" x2="750" y2="160" stroke="#94a3b8" stroke-width="2"/>
            
            <!-- Headers -->
            <text x="100" y="95" font-family="serif" font-size="16" font-style="italic" text-anchor="middle" fill="#475569">x</text>
            <text x="210" y="95" font-family="serif" font-size="16" text-anchor="middle" fill="#475569">1</text>
            <text x="330" y="95" font-family="serif" font-size="16" text-anchor="middle" fill="#475569">2</text>
            <text x="450" y="95" font-family="serif" font-size="16" text-anchor="middle" fill="#475569">3</text>
            <text x="570" y="95" font-family="serif" font-size="16" text-anchor="middle" fill="#475569">4</text>
            <text x="690" y="95" font-family="serif" font-size="16" text-anchor="middle" fill="#475569">5</text>
            
            <!-- P(X=x) label -->
            <text x="95" y="140" font-family="serif" font-size="14" font-style="italic" text-anchor="middle" fill="#475569">P(X=x)</text>
            
            <!-- P(X=x) values -->
            <g id="prob0">
                <rect id="box0" x="185" y="125" width="50" height="25" fill="none" stroke="transparent" stroke-width="2" rx="4"/>
                <text x="210" y="140" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#1e293b">0.4</text>
            </g>
            <g id="prob1">
                <rect id="box1" x="305" y="125" width="50" height="25" fill="none" stroke="transparent" stroke-width="2" rx="4"/>
                <text x="330" y="140" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#1e293b">0.25</text>
            </g>
            <g id="prob2">
                <rect id="box2" x="425" y="125" width="50" height="25" fill="none" stroke="transparent" stroke-width="2" rx="4"/>
                <text x="450" y="140" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#1e293b">0.2</text>
            </g>
            <g id="prob3">
                <rect id="box3" x="545" y="125" width="50" height="25" fill="none" stroke="transparent" stroke-width="2" rx="4"/>
                <text x="570" y="140" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#1e293b">0.1</text>
            </g>
            <g id="prob4">
                <rect id="box4" x="665" y="125" width="50" height="25" fill="none" stroke="transparent" stroke-width="2" rx="4"/>
                <text x="690" y="140" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#1e293b">0.05</text>
            </g>
            
            <!-- Plus signs -->
            <text id="plus0" x="240" y="140" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="transparent">+</text>
            <text id="plus1" x="360" y="140" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="transparent">+</text>
            <text id="plus2" x="480" y="140" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="transparent">+</text>
            <text id="plus3" x="600" y="140" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="transparent">+</text>
            
            <!-- Arrows -->
            <g id="arrow0" class="hidden">
                <line x1="210" y1="150" x2="210" y2="180" stroke="#ef4444" stroke-width="3"/>
                <polygon points="210,185 205,175 215,175" fill="#ef4444"/>
            </g>
            <g id="arrow1" class="hidden">
                <line x1="330" y1="150" x2="330" y2="180" stroke="#ef4444" stroke-width="3"/>
                <polygon points="330,185 325,175 335,175" fill="#ef4444"/>
            </g>
            <g id="arrow2" class="hidden">
                <line x1="450" y1="150" x2="450" y2="180" stroke="#ef4444" stroke-width="3"/>
                <polygon points="450,185 445,175 455,175" fill="#ef4444"/>
            </g>
            <g id="arrow3" class="hidden">
                <line x1="570" y1="150" x2="570" y2="180" stroke="#ef4444" stroke-width="3"/>
                <polygon points="570,185 565,175 575,175" fill="#ef4444"/>
            </g>
            <g id="arrow4" class="hidden">
                <line x1="690" y1="150" x2="690" y2="180" stroke="#ef4444" stroke-width="3"/>
                <polygon points="690,185 685,175 695,175" fill="#ef4444"/>
            </g>
            
            <!-- P(X≤x) label -->
            <text x="95" y="220" font-family="serif" font-size="14" font-style="italic" text-anchor="middle" fill="#475569">P(X≤x)</text>
            
            <!-- P(X≤x) values -->
            <text id="cdf0" x="210" y="220" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#94a3b8">?</text>
            <text id="cdf1" x="330" y="220" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#94a3b8">?</text>
            <text id="cdf2" x="450" y="220" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#94a3b8">?</text>
            <text id="cdf3" x="570" y="220" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#94a3b8">?</text>
            <text id="cdf4" x="690" y="220" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#94a3b8">?</text>
            
            <!-- Calculation display -->
            <rect x="50" y="270" width="700" height="40" fill="#dbeafe" stroke="#3b82f6" stroke-width="2" rx="4"/>
            <rect x="50" y="270" width="8" height="40" fill="#3b82f6" rx="4"/>
            <text id="calcText" x="70" y="295" font-family="monospace" font-size="14" fill="#1e293b"></text>
        </svg>
        
        <div class="controls">
            <button class="play-btn" onclick="togglePlay()">
                <span id="playText">Pause</span>
            </button>
            <button class="reset-btn" onclick="reset()">Reset</button>
            <button class="next-btn" onclick="nextStep()">Next Step</button>
        </div>
    </div>

    <script>
        let currentStep = 0;
        let isPlaying = true;
        let interval;

        const steps = [
            { boxes: [0], cdf: 0, value: "0.4", calc: "Step 1: 0.4" },
            { boxes: [0, 1], cdf: 1, value: "0.65", calc: "Step 2: 0.4 + 0.25 = 0.65" },
            { boxes: [0, 1, 2], cdf: 2, value: "0.85", calc: "Step 3: 0.4 + 0.25 + 0.2 = 0.85" },
            { boxes: [0, 1, 2, 3], cdf: 3, value: "0.95", calc: "Step 4: 0.4 + 0.25 + 0.2 + 0.1 = 0.95" },
            { boxes: [0, 1, 2, 3, 4], cdf: 4, value: "1", calc: "Step 5: 0.4 + 0.25 + 0.2 + 0.1 + 0.05 = 1" }
        ];

        function updateStep(step) {
            // Clear all highlights
            for (let i = 0; i < 5; i++) {
                const box = document.getElementById(`box${i}`);
                const arrow = document.getElementById(`arrow${i}`);
                const plus = document.getElementById(`plus${i}`);
                
                if (box) {
                    box.setAttribute('stroke', 'transparent');
                    box.classList.remove('highlight');
                }
                if (arrow) {
                    arrow.classList.add('hidden');
                    arrow.classList.remove('arrow-bounce');
                }
                if (plus) {
                    plus.setAttribute('fill', 'transparent');
                }
            }

            if (step > 0) {
                const stepData = steps[step - 1];
                
                // Highlight boxes
                stepData.boxes.forEach((idx, i) => {
                    const box = document.getElementById(`box${idx}`);
                    if (box) {
                        box.setAttribute('stroke', '#ef4444');
                        box.classList.add('highlight');
                    }
                    
                    // Show plus signs between boxes
                    if (i < stepData.boxes.length - 1) {
                        const plus = document.getElementById(`plus${idx}`);
                        if (plus) {
                            plus.setAttribute('fill', '#ef4444');
                        }
                    }
                });

                // Show arrow
                const arrowIdx = stepData.cdf;
                const arrow = document.getElementById(`arrow${arrowIdx}`);
                if (arrow) {
                    arrow.classList.remove('hidden');
                    arrow.classList.add('arrow-bounce');
                }

                // Update CDF value
                const cdfEl = document.getElementById(`cdf${stepData.cdf}`);
                if (cdfEl) {
                    cdfEl.textContent = stepData.value;
                    cdfEl.setAttribute('fill', '#059669');
                }

                // Update calculation text
                const calcText = document.getElementById('calcText');
                if (calcText) {
                    calcText.textContent = stepData.calc;
                }
            } else {
                // Reset to question marks
                for (let i = 0; i < 5; i++) {
                    const cdfEl = document.getElementById(`cdf${i}`);
                    if (cdfEl) {
                        cdfEl.textContent = '?';
                        cdfEl.setAttribute('fill', '#94a3b8');
                    }
                }
                const calcText = document.getElementById('calcText');
                if (calcText) {
                    calcText.textContent = '';
                }
            }
        }

        function nextStep() {
            currentStep = (currentStep + 1) % 6;
            updateStep(currentStep);
        }

        function reset() {
            currentStep = 0;
            updateStep(currentStep);
        }

        function togglePlay() {
            isPlaying = !isPlaying;
            document.getElementById('playText').textContent = isPlaying ? 'Pause' : 'Play';
            
            if (isPlaying) {
                startAnimation();
            } else {
                clearInterval(interval);
            }
        }

        function startAnimation() {
            interval = setInterval(() => {
                if (isPlaying) {
                    nextStep();
                }
            }, 2000);
        }

        // Start animation after DOM is loaded
        window.addEventListener('DOMContentLoaded', function() {
            startAnimation();
        });
    </script>
</div>
</body>
</html>